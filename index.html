<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Color Match Challenge ðŸŒˆ</title>
  
  <!-- Favicon (Tab Image) -->
  <link rel="icon" type="image/png" href="NLC Profile.png">
  
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(45deg, #ff0099, #ffcc00, #33cc33, #0099ff, #9933ff);
      background-size: 400% 400%;
      animation: rainbowBG 6s infinite;
      height: 100vh;
      flex-direction: column; /* Added to support footer positioning */
    }

    @keyframes rainbowBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .game-container, .rules-container {
      text-align: center;
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      position: relative;
      z-index: 2;
    }

    h1 {
      font-size: 40px;
      font-weight: bold;
      color: #ff0099;
      text-shadow: 4px 4px #333;
    }

    #score, #timer, #level {
      font-size: 22px;
      margin-bottom: 20px;
      color: #333;
      font-weight: bold;
      text-shadow: 2px 2px #ffcc00;
    }

    #color-name {
      font-size: 48px;
      font-weight: bold;
      margin: 20px 0;
      animation: colorPulse 1s infinite alternate;
      color: #333;
    }

    @keyframes colorPulse {
      0% { transform: scale(1); }
      100% { transform: scale(1.1); }
    }

    #buttons-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .color-button {
      width: 130px;
      height: 70px;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      font-size: 16px;
      color: #fff;
      font-weight: bold;
      text-shadow: 1px 1px #333;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .color-button:hover {
      transform: scale(1.1);
      box-shadow: 0px 0px 20px 5px rgba(0, 0, 0, 0.2);
    }

    #message {
      margin-top: 20px;
      font-size: 28px;
      font-weight: bold;
      text-shadow: 2px 2px #ffcc00;
    }

    #message.correct {
      color: green;
    }

    #message.wrong {
      color: red;
    }

    .hidden {
      display: none;
    }

    /* Custom notification style */
    #custom-notification {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      text-align: center;
      display: none;
      z-index: 3;
    }

    #custom-notification h2 {
      font-size: 30px;
      color: #ff0000;
      text-shadow: 3px 3px #ffcc00;
    }

    #notification-buttons {
      display: flex;
      justify-content: center;
      gap: 25px;
    }

    .notification-button {
      padding: 15px 25px;
      font-size: 22px;
      background-color: #ff0099;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .notification-button:hover {
      transform: scale(1.2);
      box-shadow: 0px 0px 30px 8px rgba(0, 0, 0, 0.3);
    }

    footer {
      margin-top: auto;
      padding: 20px;
      text-align: center;
      font-size: 14px;
      font-weight: bold;
      color: white;
      text-shadow: 1px 1px #333;
    }

  </style>
</head>
<body>
  <!-- Rules Screen -->
  <div class="rules-container">
    <h1>Welcome to the Color Match Challenge! ðŸŒˆ</h1>
    <p>Rules:</p>
    <ul style="text-align: left; max-width: 400px; margin: 0 auto;">
      <li>Match based on the instruction shown!</li>
      <li>BEWARE: Text colors may not match the words!</li>
      <li>Sometimes you'll see HEX codes or color blocks!</li>
      <li>Watch for REVERSE challenges at high levels!</li>
      <li>Time decreases as levels increase - stay focused!</li>
      <li>Difficulty increases every 5 correct answers.</li>
      <li>One wrong answer = Game Over!</li>
    </ul>
  </div>

  <!-- Game Screen -->
  <div class="game-container hidden">
    <h1>ðŸŒˆ Color Match Challenge ðŸŽ¨</h1>
    <div id="level">Level: 1</div>
    <div id="score">Score: 0</div>
    <div id="timer">Time Left: 60s</div>
    <div id="color-name"></div>
    <div id="challenge-instruction" style="font-size: 18px; color: #666; margin: 10px 0; font-weight: bold;"></div>
    <div id="buttons-container"></div>
    <div id="message"></div>
  </div>

  <!-- Custom Notification -->
  <div id="custom-notification">
    <h2>Game Over! You Lost!</h2>
    <p>Your Score: <span id="final-score"></span> | Level: <span id="final-level"></span></p>
    <div id="notification-buttons">
      <button class="notification-button" onclick="playAgain()">Play Again</button>
      <button class="notification-button" onclick="quitGame()">Quit</button>
    </div>
  </div>
  
  <!-- Audio for certain sound effects -->
  <audio id="correct-sound" src="Correct.mp3"></audio>
  <audio id="game-over-sound" src="Game Over.mp3"></audio>

  <footer>
    <p>&copy; 2025 NerdJoe. All rights reserved.</p>
  </footer>

  <script>
    // Expanded list of colors for more difficulty
    const allColors = [
      { name: "Red", hex: "#FF0000" },
      { name: "Blue", hex: "#0000FF" },
      { name: "Green", hex: "#008000" },
      { name: "Yellow", hex: "#FFFF00" },
      { name: "Orange", hex: "#FFA500" },
      { name: "Purple", hex: "#800080" },
      { name: "Pink", hex: "#FF1493" },
      { name: "Cyan", hex: "#00FFFF" },
      { name: "Magenta", hex: "#FF00FF" },
      { name: "Lime", hex: "#32CD32" },
      { name: "Teal", hex: "#008080" },
      { name: "Maroon", hex: "#800000" },
      { name: "Navy", hex: "#000080" },
      { name: "Brown", hex: "#A52A2A" },
      { name: "Gold", hex: "#FFD700" },
      { name: "Violet", hex: "#8A2BE2" },
      { name: "Indigo", hex: "#4B0082" },
      { name: "Coral", hex: "#FF7F50" },
      { name: "Salmon", hex: "#FA8072" },
      { name: "Turquoise", hex: "#40E0D0" },
      { name: "Crimson", hex: "#DC143C" },
      { name: "Olive", hex: "#808000" },
      { name: "Khaki", hex: "#F0E68C" },
      { name: "Plum", hex: "#DDA0DD" },
      { name: "Orchid", hex: "#DA70D6" },
      { name: "Tan", hex: "#D2B48C" },
      { name: "Silver", hex: "#C0C0C0" },
      { name: "Gray", hex: "#808080" },
      { name: "Slate", hex: "#708090" },
      { name: "Mint", hex: "#98FB98" },
      { name: "Aqua", hex: "#00FFFF" },
      { name: "Lavender", hex: "#E6E6FA" },
      { name: "Peach", hex: "#FFCBA4" },
      { name: "Rose", hex: "#FF007F" },
      { name: "Emerald", hex: "#50C878" },
      { name: "Ruby", hex: "#E0115F" },
      { name: "Sapphire", hex: "#0F52BA" },
      { name: "Amber", hex: "#FFBF00" },
      { name: "Jade", hex: "#00A86B" },
      { name: "Ivory", hex: "#FFFFF0" }
    ];

    // DOM elements
    const rulesContainer = document.querySelector(".rules-container");
    const gameContainer = document.querySelector(".game-container");
    const colorNameElement = document.getElementById("color-name");
    const buttonsContainer = document.getElementById("buttons-container");
    const scoreElement = document.getElementById("score");
    const timerElement = document.getElementById("timer");
    const levelElement = document.getElementById("level");
    const messageElement = document.getElementById("message");
    const customNotification = document.getElementById("custom-notification");
    const finalScoreElement = document.getElementById("final-score");
    const finalLevelElement = document.getElementById("final-level");
    const correctSound = document.getElementById("correct-sound");
	const gameOverSound = document.getElementById("game-over-sound");
    const challengeInstruction = document.getElementById("challenge-instruction");

    let score = 0;
    let currentColor = "";
    let timeLeft = 60;
    let difficulty = 1;
    let timerInterval;
    let roundDelay = 0; // Delay between rounds
    let currentChallenge = "name"; // "name", "hex", or "color"
    let streak = 0; // Consecutive correct answers

    // Start the game after 3 seconds (close rules screen)
    setTimeout(() => {
      rulesContainer.classList.add("hidden");
      gameContainer.classList.remove("hidden");
      startGame();
    }, 5000);

    // Start the game
    function startGame() {
      startTimer();
      setNewRound();
    }

    // Enhanced timer logic with decreasing time limits
    function startTimer() {
      // Set initial time based on difficulty
      if (difficulty <= 3) timeLeft = 45; // Levels 1-3: 45 seconds
      else if (difficulty <= 6) timeLeft = 35; // Levels 4-6: 35 seconds
      else if (difficulty <= 9) timeLeft = 25; // Levels 7-9: 25 seconds
      else timeLeft = 15; // Levels 10+: 15 seconds

      timerElement.textContent = `Time Left: ${timeLeft}s`;

      timerInterval = setInterval(() => {
        timeLeft--;
        timerElement.textContent = `Time Left: ${timeLeft}s`;

        // Add urgency visual effect when time is low
        if (timeLeft <= 10) {
          timerElement.style.color = "red";
          timerElement.style.animation = "colorPulse 0.5s infinite alternate";
        } else {
          timerElement.style.color = "#333";
          timerElement.style.animation = "none";
        }

        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          endGame();
        }
      }, 1000);
    }

    // End the game - show custom notification
    function endGame() {
      if (timerInterval) clearInterval(timerInterval);
      customNotification.style.display = "block";
      gameContainer.classList.add("hidden");
      finalScoreElement.textContent = score;
      finalLevelElement.textContent = difficulty;
      gameOverSound.play();
    }

    // Enhanced difficulty progression and confusion mechanics
    function setNewRound() {
      // Increase difficulty every 5 points (more frequent progression)
      if (score > 0 && score % 5 === 0) {
        const newDifficulty = Math.floor(score / 5) + 1;
        if (newDifficulty > difficulty) {
          difficulty = newDifficulty;
          levelElement.textContent = `Level: ${difficulty}`;
          
          // Restart timer with new time limit
          if (timerInterval) clearInterval(timerInterval);
          startTimer();
        }
      }

      // Add delay between rounds at higher levels for extra pressure
      roundDelay = difficulty > 5 ? Math.min(difficulty * 100, 1000) : 0;

      setTimeout(() => {
        // Increase number of color options based on difficulty
        const colorCount = Math.min(4 + difficulty * 2, allColors.length);
        const availableColors = allColors.slice(0, colorCount);
        
        // Select random color for the correct answer
        const randomColor = availableColors[Math.floor(Math.random() * availableColors.length)];
        currentColor = randomColor.name;

        // Determine challenge type based on difficulty and randomness
        determineChallengeType();

        // Display the challenge based on type
        displayChallenge(randomColor, availableColors);

        generateColorButtons(availableColors);
        messageElement.textContent = "";
      }, roundDelay);
    }

    // NEW: Determine what type of challenge to present
    function determineChallengeType() {
      const rand = Math.random();
      
      if (difficulty <= 3) {
        // Early levels: Mostly name challenges
        currentChallenge = rand < 0.8 ? "name" : (rand < 0.9 ? "hex" : "color");
      } else if (difficulty <= 6) {
        // Mid levels: Mixed challenges
        currentChallenge = rand < 0.5 ? "name" : (rand < 0.75 ? "hex" : "color");
      } else if (difficulty <= 10) {
        // Higher levels: More hex and color challenges
        currentChallenge = rand < 0.3 ? "name" : (rand < 0.65 ? "hex" : "color");
      } else {
        // Expert levels: Maximum variety with bonus challenges
        if (rand < 0.25) currentChallenge = "name";
        else if (rand < 0.5) currentChallenge = "hex";
        else if (rand < 0.75) currentChallenge = "color";
        else currentChallenge = "reverse"; // NEW: Reverse psychology challenge
      }
    }

    // NEW: Display the challenge based on type
    function displayChallenge(randomColor, availableColors) {
      let displayText = "";
      let displayColor = "";
      let instruction = "";

      switch (currentChallenge) {
        case "name":
          displayText = randomColor.name;
          instruction = "Click the button with this COLOR NAME";
          // Confusion mechanic for color display
          if (difficulty <= 2) {
            displayColor = Math.random() < 0.5 ? randomColor.hex : 
              availableColors[Math.floor(Math.random() * availableColors.length)].hex;
          } else if (difficulty <= 5) {
            displayColor = Math.random() < 0.75 ? 
              availableColors.filter(c => c.name !== currentColor)[Math.floor(Math.random() * (availableColors.length - 1))].hex :
              randomColor.hex;
          } else {
            const confusingColors = availableColors.filter(c => c.name !== currentColor);
            displayColor = confusingColors[Math.floor(Math.random() * confusingColors.length)].hex;
          }
          break;

        case "hex":
          displayText = randomColor.hex.toUpperCase();
          instruction = "Click the button for this HEX CODE";
          // Display hex in a random color for confusion
          displayColor = availableColors[Math.floor(Math.random() * availableColors.length)].hex;
          break;

        case "color":
          // Show the actual color, player must click the matching color button
          displayText = "â– â– â– â– â– "; // Color blocks
          displayColor = randomColor.hex;
          instruction = "Click the button that matches this COLOR";
          break;

        case "reverse":
          displayText = randomColor.name;
          instruction = "Click the button that is NOT this color name";
          displayColor = randomColor.hex;
          // For reverse, we need to pick a different correct answer
          const incorrectColors = availableColors.filter(c => c.name !== currentColor);
          if (incorrectColors.length > 0) {
            currentColor = incorrectColors[Math.floor(Math.random() * incorrectColors.length)].name;
          }
          break;
      }

      colorNameElement.textContent = displayText;
      colorNameElement.style.color = displayColor;
      challengeInstruction.textContent = instruction;
      
      // Add extra visual effects for higher difficulties
      if (difficulty > 8) {
        colorNameElement.style.textShadow = "0 0 10px " + displayColor;
      }
    }

    // Generate color buttons with enhanced difficulty
    function generateColorButtons(availableColors) {
      buttonsContainer.innerHTML = "";
      
      // Shuffle the colors for button placement
      const shuffledColors = [...availableColors].sort(() => Math.random() - 0.5);
      
      shuffledColors.forEach(color => {
        const button = document.createElement("button");
        button.className = "color-button";
        button.style.backgroundColor = color.hex;
        button.textContent = color.name;
        
        // At higher difficulties, make button text harder to read
        if (difficulty > 7) {
          // Make text color closer to background color for added difficulty
          const bgColor = hexToRgb(color.hex);
          if (bgColor) {
            const textColor = getBrightness(bgColor) > 128 ? '#333' : '#fff';
            button.style.color = textColor;
            button.style.textShadow = difficulty > 10 ? 'none' : '1px 1px #333';
          }
        }
        
        button.addEventListener("click", () => checkAnswer(color.name));
        buttonsContainer.appendChild(button);
      });
    }

    // Helper functions for color manipulation
    function hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : null;
    }

    function getBrightness(rgb) {
      return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;
    }

    // Check if the clicked answer is correct
    function checkAnswer(selectedColor) {
      let isCorrect = false;
      
      // Determine if answer is correct based on challenge type
      switch (currentChallenge) {
        case "name":
        case "hex":
        case "color":
          isCorrect = selectedColor === currentColor;
          break;
        case "reverse":
          isCorrect = selectedColor !== currentColor;
          break;
      }

      if (isCorrect) {
        correctSound.play();
        score++;
        streak++;
        
        // Bonus points for streaks
        if (streak >= 5 && streak % 5 === 0) {
          score += 2; // Bonus points for every 5 in a row
          messageElement.textContent = `Correct! STREAK BONUS +3 points!`;
        } else if (streak >= 10) {
          messageElement.textContent = `Correct! ON FIRE! ðŸ”¥`;
        } else {
          messageElement.textContent = "Correct!";
        }
        
        messageElement.className = "correct";
        updateScore();
        setNewRound();
      } else {
        streak = 0; // Reset streak on wrong answer
        messageElement.textContent = "Game Over!";
        messageElement.className = "wrong";
        endGame();
      }
    }

    // Update the score display
    function updateScore() {
      scoreElement.textContent = `Score: ${score}`;
    }

    // Play Again function
    function playAgain() {
      score = 0;
      timeLeft = 60;
      difficulty = 1;
      roundDelay = 0;
      streak = 0;
      currentChallenge = "name";
      levelElement.textContent = `Level: 1`;
      scoreElement.textContent = `Score: 0`;
      timerElement.textContent = `Time Left: 60s`;
      timerElement.style.color = "#333";
      timerElement.style.animation = "none";
      challengeInstruction.textContent = "";
      colorNameElement.style.textShadow = "none";
      customNotification.style.display = "none";
      gameContainer.classList.remove("hidden");
      startGame();
    }

    // Quit Game function (closes the page)
    function quitGame() {
      window.close();
    }
  </script>
</body>
</html>